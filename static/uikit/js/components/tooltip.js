/*! For license information please see tooltip.js.LICENSE.txt */
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i(require("uikit-util")):"function"==typeof define&&define.amd?define("uikittooltip",["uikit-util"],i):(t="undefined"!=typeof globalThis?globalThis:t||self).UIkitTooltip=i(t.UIkit.util)}(this,(function(t){"use strict";var i={mixins:[{props:{container:Boolean},data:{container:!0},computed:{container(i){let{container:s}=i;return!0===s&&this.$container||s&&t.$(s)}}},{props:{cls:Boolean,animation:"list",duration:Number,velocity:Number,origin:String,transition:String},data:{cls:!1,animation:[!1],duration:200,velocity:.2,origin:!1,transition:"ease",clsEnter:"uk-togglabe-enter",clsLeave:"uk-togglabe-leave"},computed:{hasAnimation(t){let{animation:i}=t;return!!i[0]},hasTransition(i){let{animation:s}=i;return["slide","reveal"].some((i=>t.startsWith(s[0],i)))}},methods:{toggleElement(i,s,e){return new Promise((o=>Promise.all(t.toNodes(i).map((i=>{const o=t.isBoolean(s)?s:!this.isToggled(i);if(!t.trigger(i,"before"+(o?"show":"hide"),[this]))return Promise.reject();const n=(t.isFunction(e)?e:!1!==e&&this.hasAnimation?this.hasTransition?function(i){var s;const[e="reveal",o="top"]=(null==(s=i.animation[0])?void 0:s.split("-"))||[],n=[["left","right"],["top","bottom"]],r=n[t.includes(n[0],o)?0:1],l=r[1]===o,h=["width","height"][n.indexOf(r)],a="margin-"+r[0],d="margin-"+o;return async(s,o)=>{let{duration:n,velocity:r,transition:c,_toggle:p}=i,f=t.dimensions(s)[h];const u=t.Transition.inProgress(s);await t.Transition.cancel(s),o&&p(s,!0);const g=Object.fromEntries(["padding","border","width","height","overflowY","overflowX",a,d].map((t=>[t,s.style[t]]))),m=t.dimensions(s),w=t.toFloat(t.css(s,a)),v=t.toFloat(t.css(s,d)),b=m[h]+v;u||o||(f+=v);const[y]=t.wrapInner(s,"<div>");t.css(y,{boxSizing:"border-box",height:m.height,width:m.width,...t.css(s,["overflow","padding","borderTop","borderRight","borderBottom","borderLeft","borderImage",d])}),t.css(s,{padding:0,border:0,minWidth:0,minHeight:0,[d]:0,width:m.width,height:m.height,overflow:"hidden",[h]:f});const T=f/b;n=(r*b+n)*(o?1-T:T);const k={[h]:o?b:0};l&&(t.css(s,a,b-f+w),k[a]=o?w:b+w),!l^"reveal"===e&&(t.css(y,a,-b+f),t.Transition.start(y,{[a]:o?0:-b},n,c));try{await t.Transition.start(s,k,n,c)}finally{t.css(s,g),t.unwrap(y.firstChild),o||p(s,!1)}}}(this):(r=this,(i,s)=>{t.Animation.cancel(i);const{animation:e,duration:o,_toggle:n}=r;return s?(n(i,!0),t.Animation.in(i,e[0],o,r.origin)):t.Animation.out(i,e[1]||e[0],o,r.origin).then((()=>n(i,!1)))}):function(i){let{_toggle:s}=i;return(i,e)=>(t.Animation.cancel(i),t.Transition.cancel(i),s(i,e))}(this))(i,o);var r;const l=o?this.clsEnter:this.clsLeave;t.addClass(i,l),t.trigger(i,o?"show":"hide",[this]);const h=()=>{t.removeClass(i,l),t.trigger(i,o?"shown":"hidden",[this]),this.$update(i)};return n?n.then(h,(()=>(t.removeClass(i,l),Promise.reject()))):h()}))).then(o,t.noop)))},isToggled(i){return void 0===i&&(i=this.$el),[i]=t.toNodes(i),!!t.hasClass(i,this.clsEnter)||!t.hasClass(i,this.clsLeave)&&(this.cls?t.hasClass(i,this.cls.split(" ")[0]):t.isVisible(i))},_toggle(i,s){if(!i)return;let e;s=Boolean(s),this.cls?(e=t.includes(this.cls," ")||s!==t.hasClass(i,this.cls),e&&t.toggleClass(i,this.cls,t.includes(this.cls," ")?void 0:s)):(e=s===i.hidden,e&&(i.hidden=!s)),t.$$("[autofocus]",i).some((i=>t.isVisible(i)?i.focus()||!0:i.blur())),e&&(t.trigger(i,"toggled",[s,this]),this.$update(i))}}},{props:{pos:String,offset:null,flip:Boolean,shift:Boolean,inset:Boolean},data:{pos:"bottom-"+(t.isRtl?"right":"left"),offset:!1,flip:!0,shift:!0,inset:!1},connected(){this.pos=this.$props.pos.split("-").concat("center").slice(0,2),[this.dir,this.align]=this.pos,this.axis=t.includes(["top","bottom"],this.dir)?"y":"x"},methods:{positionAt(i,s,e){let o=[this.getPositionOffset(i),this.getShiftOffset(i)];const n=[this.flip&&"flip",this.shift&&"shift"],r={element:[this.inset?this.dir:t.flipPosition(this.dir),this.align],target:[this.dir,this.align]};if("y"===this.axis){for(const t in r)r[t].reverse();o.reverse(),n.reverse()}const[l]=t.scrollParents(i,/auto|scroll/),{scrollTop:h,scrollLeft:a}=l,d=t.dimensions(i);t.css(i,{top:-d.height,left:-d.width}),t.positionAt(i,s,{attach:r,offset:o,boundary:e,placement:n,viewportOffset:this.getViewportOffset(i)}),l.scrollTop=h,l.scrollLeft=a},getPositionOffset(i){return t.toPx(!1===this.offset?t.css(i,"--uk-position-offset"):this.offset,"x"===this.axis?"width":"height",i)*(t.includes(["left","top"],this.dir)?-1:1)*(this.inset?-1:1)},getShiftOffset(i){return"center"===this.align?0:t.toPx(t.css(i,"--uk-position-shift-offset"),"y"===this.axis?"width":"height",i)*(t.includes(["left","top"],this.align)?1:-1)},getViewportOffset:i=>t.toPx(t.css(i,"--uk-position-viewport-offset"))}}],args:"title",props:{delay:Number,title:String},data:{pos:"top",title:"",delay:0,animation:["uk-animation-scale-up"],duration:100,cls:"uk-active"},beforeConnect(){var i;this._hasTitle=t.hasAttr(this.$el,"title"),t.attr(this.$el,"title",""),this.updateAria(!1),i=this.$el,t.isFocusable(i)||t.attr(i,"tabindex","0")},disconnected(){this.hide(),t.attr(this.$el,"title",this._hasTitle?this.title:null)},methods:{show(){!this.isToggled(this.tooltip||null)&&this.title&&(this._unbind=t.once(document,"show keydown "+t.pointerDown,this.hide,!1,(i=>i.type===t.pointerDown&&!t.within(i.target,this.$el)||"keydown"===i.type&&27===i.keyCode||"show"===i.type&&i.detail[0]!==this&&i.detail[0].$name===this.$name)),clearTimeout(this.showTimer),this.showTimer=setTimeout(this._show,this.delay))},async hide(){t.matches(this.$el,"input:focus")||(clearTimeout(this.showTimer),this.isToggled(this.tooltip||null)&&(await this.toggleElement(this.tooltip,!1,!1),t.remove(this.tooltip),this.tooltip=null,this._unbind()))},_show(){this.tooltip=t.append(this.container,'<div class="uk-'+this.$options.name+'"> <div class="uk-'+this.$options.name+'-inner">'+this.title+"</div> </div>"),t.on(this.tooltip,"toggled",((i,s)=>{if(this.updateAria(s),!s)return;this.positionAt(this.tooltip,this.$el);const[e,o]=function(i,s,e){let[o,n]=e;const r=t.offset(i),l=t.offset(s),h=[["left","right"],["top","bottom"]];for(const t of h){if(r[t[0]]>=l[t[1]]){o=t[1];break}if(r[t[1]]<=l[t[0]]){o=t[0];break}}const a=t.includes(h[0],o)?h[1]:h[0];return n=r[a[0]]===l[a[0]]?a[0]:r[a[1]]===l[a[1]]?a[1]:"center",[o,n]}(this.tooltip,this.$el,this.pos);this.origin="y"===this.axis?t.flipPosition(e)+"-"+o:o+"-"+t.flipPosition(e)})),this.toggleElement(this.tooltip,!0)},updateAria(i){t.attr(this.$el,"aria-expanded",i)}},events:{focus:"show",blur:"hide",[t.pointerEnter+" "+t.pointerLeave](i){t.isTouch(i)||this[i.type===t.pointerEnter?"show":"hide"]()},[t.pointerDown](i){t.isTouch(i)&&this.show()}}};return"undefined"!=typeof window&&window.UIkit&&window.UIkit.component("tooltip",i),i}));